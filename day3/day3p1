#!/usr/bin/env zsh

sum=0
grep -oE 'mul\([0-9]{1,3},[0-9]{1,3}\)' $1 |
sed -E 's/mul\(([0-9]{1,3}),([0-9]{1,3})\)$/\1 \2/g' | 
while read -r x y; do
		(( sum+=x * y ))
done
echo "$sum"
